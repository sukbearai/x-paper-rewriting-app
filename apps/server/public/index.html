<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API 文档</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <div class="container">
      <h1>API 文档</h1>
<h3>基本信息</h3>
<ul>
<li><strong>基本 URL</strong>: <code>https://rewriting.congrongtech.cn/</code></li>
<li><strong>Content-Type</strong>: <code>application/json</code></li>
<li><strong>编码</strong>: UTF-8</li>
</ul>
<p>所有接口遵循统一的响应格式：</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;响应消息&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><code>code</code>: 状态码，<code>0</code> 表示成功，其他表示错误。</li>
<li><code>message</code>: 响应的描述信息。</li>
<li><code>data</code>: 响应的具体数据。</li>
<li><code>timestamp</code>: 服务器响应时的时间戳。</li>
</ul>
<hr>
<h3>API 详情</h3>
<h3>1. 发送短信验证码</h3>
<p><strong>端点</strong>: <code>POST /otp</code></p>
<p><strong>描述</strong>: 向用户手机发送一次性短信验证码，用于后续操作（如注册）的验证。</p>
<p><strong>请求体</strong>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;+8613800138000&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>参数</strong>:</p>
<ul>
<li><code>phone</code> (必需): 用户的手机号码，需符合国际格式（如 <code>+</code> 开头）。</li>
</ul>
<p><strong>cURL 示例</strong>:</p>
<pre><code class="language-bash">curl -X POST https://rewriting.congrongtech.cn/otp \
  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
  -d <span class="hljs-string">&#x27;{
    &quot;phone&quot;: &quot;+8613800138000&quot;
  }&#x27;</span>
</code></pre>
<p><strong>成功响应 (HTTP 200)</strong>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;验证码发送成功&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>错误响应</strong>:</p>
<ul>
<li><strong>HTTP 400 - 请求体或参数错误</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;请求体格式错误，应为 JSON&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;手机号格式不正确&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>HTTP 409 - 手机号已注册</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">409</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;该手机号已注册，请直接登录&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>HTTP 500 - 服务器内部错误</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;验证码发送失败&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<hr>
<h3>2. 用户注册</h3>
<p><strong>端点</strong>: <code>POST /signup</code></p>
<p><strong>描述</strong>: 使用邮箱、密码等信息注册新用户。如果提供了手机号，则必须同时提供通过 <code>/otp</code> 接口获取的验证码。</p>
<p><strong>请求体</strong>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user@example.com&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;securepassword&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;newuser&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;phone&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;+8613800138000&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;otp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;123456&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;inviteCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;optional-code&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>参数</strong>:</p>
<ul>
<li><code>email</code> (必需): 用户的邮箱地址。</li>
<li><code>password</code> (必需): 密码，长度至少 6 位。</li>
<li><code>username</code> (必需): 用户名，长度至少 2 位。</li>
<li><code>phone</code> (可选): 用户的手机号码。</li>
<li><code>otp</code> (如果提供了 <code>phone</code> 则必需): 通过短信收到的 4-8 位验证码。</li>
<li><code>inviteCode</code> (可选): 邀请码。</li>
</ul>
<p><strong>cURL 示例</strong>:</p>
<pre><code class="language-bash">curl -X POST https://rewriting.congrongtech.cn/signup \
  -H <span class="hljs-string">&quot;Content-Type: application/json&quot;</span> \
  -d <span class="hljs-string">&#x27;{
    &quot;email&quot;: &quot;user@example.com&quot;,
    &quot;password&quot;: &quot;securepassword&quot;,
    &quot;username&quot;: &quot;newuser&quot;,
    &quot;phone&quot;: &quot;+8613800138000&quot;,
    &quot;otp&quot;: &quot;123456&quot;
  }&#x27;</span>
</code></pre>
<p><strong>成功响应 (HTTP 201)</strong>:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;注册成功&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user-uuid&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;profileId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">123</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;inviteCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;optional-code&quot;</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>错误响应</strong>:</p>
<ul>
<li><strong>HTTP 400 - 参数校验失败</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;邮箱不能为空&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 或其他参数校验错误信息</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;手机号注册需要验证码&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>HTTP 400 - 验证码错误</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;验证码不正确或已过期&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li><strong>HTTP 400/500 - 注册失败</strong>:<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;code&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;注册失败&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 或更具体的数据库错误信息</span>
  <span class="hljs-attr">&quot;data&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1672531200000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>

      
      <div class="highlight-box">
        <h3>📝 Development Notes</h3>
        <p>This is a complete example application demonstrating various features and best practices of the Hono framework on EdgeOne Functions.</p>
        <p>The project structure is clear, code is well organized, and suitable as a starting template for other projects.</p>
      </div>
    </div>
  </body>
</html>
